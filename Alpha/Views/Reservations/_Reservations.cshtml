@{
    bool auth = User.Identity.IsAuthenticated;
    bool isManager = auth && User.IsInRole("Manager");
}

@model IEnumerable<Alpha.Models.Reservation>

@if (Model.ToList().Count() > 0)
{
    <div class="row">
        <div class="col-xs-2">
            <a class="header" href="#">@Html.DisplayNameFor(model => model.Room)</a>
        </div>
        <div class="col-xs-2 text-right">
            <a class="header" href="#">@Html.DisplayNameFor(model => model.Start)&nbsp;&uarr;</a>
        </div>
        <div class="col-xs-2">
            <a class="header" href="#">@Html.DisplayNameFor(model => model.End)</a>
        </div>
        <div class="col-xs-3">
            <a class="header" href="#">@Html.DisplayNameFor(model => model.User)</a>
        </div>
        <div class="col-xs-2 text-center">
        </div>
    </div>

    @foreach (var item in Model.OrderBy(s => s.Start))
    {
        bool isIdle = item.Status == Status.Idle;

            <div class="row block">
                <div class="col-xs-2">
                    @Html.DisplayFor(modelItem => item.Room.Name)
                </div>
                <div class="col-xs-2 text-right">
                    <a class=@(isManager ? "" : "disabled") asp-action="Edit" asp-route-id="@item.Id">
                        @item.Start.ToShortDateString()<br />
                        @item.Start.ToShortTimeString()
                    </a>
                </div>
                <div class="col-xs-2">
                    <a class=@(isManager ? "" : "disabled") asp-action="Edit" asp-route-id="@item.Id">
                        @item.End.ToShortDateString()<br />
                        @item.End.ToShortTimeString()
                    </a>
                </div>
                <div class="col-xs-3">
                    @Html.DisplayFor(modelItem => item.User.Name)
                </div>
                <div class="col-xs-2 text-center">
                    @if (isIdle)
                    {
                        <div class="form-group">
                            <input type="submit" onclick="Setstatus(@item.Id, 0)" value="&#10003;&nbsp;Approve" class="btn btn-success" />
                        </div>
                    }
                </div>
            </div>
    }
}

